---
import ImageComp from "./ImageComp.astro";
import { PHONE_NUMBER } from "../data/consts";

interface ctaProp {
  url: string;
  text: string;
  variant?: "primary" | "secondary";
}

interface statsProp {
  prefix?: string;
  value: string;
  suffix?: string;
  title?: string;
}

interface Props {
  data: {
    image: {
      src: string;
      alt: string;
    };
    upperHeader?: string;
    title: string;
    subTitle?: string;
    cta?: ctaProp[];
    stats?: statsProp[];
  };
}

const { data } = Astro.props;
---

<section
  class="hero-section relative overflow-hidden flex justify-center items-center lg:pb-24 text-white min-h-[90vh]"
  aria-label="Hero section"
>
  <!-- Background overlay for better text readability -->
  <div
    class="absolute inset-0 bg-linear-to-b from-muted-800/80 via-muted-800/20 to-muted-800/80 -z-10"
    aria-hidden="true"
  >
  </div>

  <!-- Background Image -->
  <ImageComp
    src={data.image.src}
    alt={data.image.alt}
    class="absolute inset-0 h-full w-full object-cover object-center brightness-90 animate-slow-zoom -z-20"
    loading="eager"
    quality={100}
  />

  <!-- Content Container -->
  <div class="max-w-7xl w-full px-5 md:px-8 lg:px-12 mx-auto">
    <div
      class="flex flex-col justify-center items-center max-w-5xl"
    >
      <!-- Main Content -->
      <div
        class="flex flex-col items-center gap-4 lg:gap-6 text-center pt-28 lg:pt-44 "
      >
        <span class="flex lg:pb-6 items-center w-full gap-2 justify-center text-xl sm:text-2xl/tight md:text-2xl/tight lg:text-2xl font-title drop-shadow-2xl max-w-xl"><div class="border-t border border-white w-12 "></div>{data.upperHeader}</span>
        <h1
          class="font-title py-6 text-white text-4xl tracking-wide lg:tracking-[0.2em] sm:text-5xl/tight md:text-6xl/tight lg:text-7xl/16  font-semibold drop-shadow-2xl bg-linear-to-br from-white-100 via-muted-100/60 to-muted-100/80 "
          set:html={data.title}
        />
        {
          data.subTitle && (
            <h2
              class="text-lg/7 sm:text-xl/8 md:text-xl/6 lg:text-3xl py-6 font-light text-muted-50 max-w-2xl"
              set:html={data.subTitle}
            />
          )
        }
      </div>
      <!-- Call to Action Buttons -->
      {
        data.cta && data.cta.length > 0 && (
          <div class="mt-10 flex flex-col gap-6 items-center sm:flex-row  w-full sm:w-auto">
            {data.cta.map((item, index) => (
              <a
                href={item.url}
                class={`${index === 0 ? "" : ""} bg-monza-900 text-base sm:text-lg md:text-xl px-8 py-4 min-w-[200px] text-center font-semibold transition-all duration-300 hover:scale-105 hover:shadow-2xl`}
                aria-label={item.text}
              >
                {item.text}
              </a>
            ))}
          </div>
        )
      }

      <!-- Statistics -->
      {
        data.stats && (
          <ul class="flex justify-between gap-6 md:mt-12 py-6 font-title text-pretty">
              {data.stats.map((stat:any) => ( 
                <li class="flex flex-col-reverse gap-2 text-monza-900">
                  <h2 class=" text-lg md:text-xl/tight lg:text-2xl">{stat.title}</h2>
                  <div class=" flex items-center justify-center">
                    <span class="text-lg sm:text-xl/tight md:text-2xl/tight lg:text-6xl">{stat.prefix}</span>
                    <p class="text-lg sm:text-2xl/tight md:text-3xl/tight lg:text-7xl">{stat.value}</p>
                    <span class="text-lg sm:text-xl/tight md:text-2xl/tight lg:text-6xl">{stat.suffix}</span>
                  </div>
                </li>
              ))}
          </ul>
        )
      }
    </div>
  </div>
</section>

<style>
  .hero-section {
    position: relative;
  }

  /* Improved text shadow for better readability */
  h1,
  h2 {
    text-shadow:
      0 2px 10px rgba(0, 0, 0, 0.7),
      0 4px 20px rgba(0, 0, 0, 0.5);
  }

  /* Enhanced animation for background image */
  @keyframes slow-zoom {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(1.1);
    }
  }

  .animate-slow-zoom {
    animation: slow-zoom 20s ease-in-out infinite alternate;
  }

  /* Button hover effects */
  .btn-primary:hover,
  .btn-transparent:hover {
    transform: translateY(-2px);
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .hero-section {
      min-height: 100vh;
    }
  }
</style>
