---
interface Step {
  number: number;
  title: string;
  description: string;
}

interface Props {
  title: string;
  subtitle?: string;
  steps: Step[];
}

const { title, subtitle, steps } = Astro.props;
---

<section class="py-4 md:py-8 bg-linear-to-bl from-transparent via-white to-muted-50">
  <div class="max-w-7xl mx-auto px-5 md:px-8 lg:px-12">
    <!-- Section Header -->
    <div class="text-center mb-12 md:mb-16">
      <h2 class="title">
        {title}
      </h2>
      {subtitle && <p class="subtitle">{subtitle}</p>}
    </div>

    <!-- Steps -->
    <div class="relative">
      <!-- Connection Line (Desktop) -->
      <div
        class="hidden lg:block absolute top-16 left-0 right-0 h-1 bg-primary-200"
        aria-hidden="true"
      >
      </div>

    <div class="flex flex-col mx-auto gap-6 max-w-5xl">
      {steps.map((step, index) => {
        const isReversed = index % 2 !== 0;
        const colorClass = ["bg-white", "bg-white", "bg-monza-700"][index % 3];
        const numberColor = ["bg-monza-700", "bg-monza-700", "bg-white"][index % 3];
        const numberTextColor = ["text-white", "text-white", "text-madison-950"][index % 3];
        const textColor = ["text-madison-950", "text-madison-950", "text-white",][index % 3];

        return (
          <div
            class={`${colorClass} group first:bg-madison-950 border border-gray-200 shadow-md transition ease-out duration-200 hover:scale-105 hover:shadow-2xl hover:-translate-y-2`}
          >
            <div
              class={`flex flex-col gap-6 p-8 items-center
                ${isReversed ? "md:flex-row-reverse" : "md:flex-row"}`}
            >
              <div class="flex-shrink-0">
                <div class={`inline-flex items-center justify-center w-20 h-20 ${numberColor} ${numberTextColor} group-first:bg-white group-first:text-madison-950 text-5xl font-bold rounded-full shadow-lg`}>
                  {step.number}
                </div>
              </div>

              <div
                class={`flex-1 mt-4 md:mt-0
                  text-center
                  ${isReversed ? "md:text-right md:pr-4" : "md:text-left md:pl-4"}`}
              >
                <h3 class={`text-2xl md:text-3xl font-title font-bold ${textColor} group-first:text-white mb-3`}>
                  {step.title}
                </h3>
                <p class={`text-muted-800 ${textColor} leading-relaxed group-first:text-white`}>
                  {step.description}
                </p>
              </div>
            </div>
          </div>
        );
      })}
    </div>
    </div>
  </div>
</section>
