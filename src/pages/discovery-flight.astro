---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import CTASection from "../components/CTASection.astro";
import Hero75 from "../components/Hero75.astro";
import CardSwiper from "../components/CardSwiper/CardSwiper.astro";
import DiscoveryFlightOffering from "../components/DiscoveryFlightOffering.astro";
import DiscoveryFlightPostOffering from "../components/DiscoveryFlightPostOffering.astro";
import DiscoveryFlightFormSection from "../components/DiscoveryFlight/DiscoveryFlightFormSection.astro";
import { LOCATION, COMPANY_NAME, NEAR_LOCATIONS, AIRPORT_CODE, AIRPORT, COMPANY_NICKNAME } from "../data/consts";

const blogPosts = await getCollection("blog");
const sortedPosts = blogPosts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);

// Format date helper
const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  }).format(date);
};

const heroData = {
  image: {
    src: "/src/assets/facebook/students-and-staff-around-white-aircraft-blue-sky-green-grass.jpg",
    alt: "Students and staff around white aircraft with blue sky and green grass",
  },
  upperHeader: `Flying is Freedom`,
  title: `Discovery Flight`,
  subTitle: `Experience the Thrill of Flying with an Eagle Aircraft Discovery Flight`,
  cta: [{ url: "#discovery-flight-form", text: `Book a discovery Flight` }],
};

const constBlogData = {
  upperHeader: "We're Eager To Hear From You",
  title: "Contact Us",
  paragraphs: ["Stay touch with us."],
  upperHeaderTwo: "They Are Here For You",
  titleTwo: "Our Fleet Aircrafts",
};

const swiper = {
  title: "Discover The Skies under a new Perspective",
  upperHeader: `DISCOVERY FLIGHTS`,
  paragraphs: [""],
  items: [
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/old website/download-768x431.jpeg",
        alt: "Download",
      },
    },
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/facebook/aircraft-underview-day-city-canal-angle2.jpg",
        alt: "Aircraft underview with city canal from angle 2",
      },
    },
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/facebook/small-zeppelin-peanuts-farm-field.jpg",
        alt: "Small zeppelin over peanuts farm field",
      },
    },
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/drive/sky-sunset-plane-wing-2_eagle-air_indiana-USA_valparaiso-IN_Flight-school_pilot-training.jpg",
        alt: "Sky sunset plane wing view 2, Eagle Aircraft Indiana USA Valparaiso IN flight school pilot training",
      },
    },
  ],
};

const metaTagsData = {
  siteTitle: `Discovery Flight in ${LOCATION.city}, ${LOCATION.state} | ${COMPANY_NAME}`,
  siteDescription: `Book your first flight lesson at ${COMPANY_NICKNAME}. Experience a hands-on discovery flight at ${AIRPORT} (${AIRPORT_CODE}) and start your journey toward becoming a pilot in ${LOCATION.locationFull}.`,
  siteKeywords: [
    `discovery flight ${LOCATION.city}`,
    `introductory flight lesson ${LOCATION.locationFull}`,
    `learn to fly ${LOCATION.city}`,
    `first flight lesson ${LOCATION.state}`,
    `intro flight ${AIRPORT_CODE}`,
    `pilot training near ${NEAR_LOCATIONS[0]}`,
    `flight school ${LOCATION.locationFull}`,
    `${COMPANY_NAME} discovery flight`,
    `${COMPANY_NICKNAME} intro flight`,
    `flying lessons ${LOCATION.city}`,
    `aviation experience ${LOCATION.state}`,
    `Cessna discovery flight ${LOCATION.city}`,
    `discovery flight gift certificate ${LOCATION.state}`,
    `how to start flight training at ${AIRPORT}`,
    `beginner flight lessons ${LOCATION.city}`,
    `becoming a pilot at ${COMPANY_NAME}`,
    `flight training Porter County`,
    `discovery flight Indiana`,
    `start flight school ${LOCATION.city}`,
    `hands on flight training ${AIRPORT_CODE}`,
    `scenic discovery flights ${LOCATION.city}`,
    `introduction to aviation ${LOCATION.locationFull}`,
    `affordable discovery flights ${LOCATION.state}`,
    `pilot career path discovery flight`,
    `Cessna Pilot Center ${LOCATION.city}`,
    `FAA Part 141 discovery flight`,
    `KVPZ discovery flight`,
    `flight school near ${NEAR_LOCATIONS[0]}`,
    `discovery flight for students`,
    `discovery flight for veterans`
  ].join(", "),
};
---

<BaseLayout {...metaTagsData}>
  <Hero75 data={heroData} />
  <DiscoveryFlightOffering />
  <DiscoveryFlightFormSection />
  <DiscoveryFlightPostOffering />
  <div class="py-6"></div>
  <CardSwiper swiperData={swiper} items={swiper.items} />
  <div class="py-12"></div>
  <CTASection />
</BaseLayout>
