---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import CTASection from "../components/CTASection.astro";
import Hero75 from "../components/Hero75.astro";
import CardSwiper from "../components/CardSwiper/CardSwiper.astro";
import DiscoveryFlightOffering from "../components/DiscoveryFlightOffering.astro";
import DiscoveryFlightPostOffering from "../components/DiscoveryFlightPostOffering.astro";
import DiscoveryFlightFormSection from "../components/DiscoveryFlight/DiscoveryFlightFormSection.astro";
import { LOCATION, COMPANY_NAME } from "../data/consts";

const blogPosts = await getCollection("blog");
const sortedPosts = blogPosts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);

// Format date helper
const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  }).format(date);
};

const heroData = {
  image: {
    src: "/src/assets/facebook/students-and-staff-around-white-aircraft-blue-sky-green-grass.jpg",
    alt: "Students and staff around white aircraft with blue sky and green grass",
  },
  upperHeader: `Flying is Freedom`,
  title: `Discovery Flight`,
  subTitle: `Experience the Thrill of Flying with an Eagle Aircraft Discovery Flight`,
  cta: [{ url: "#discovery-flight-form", text: `Book a discovery Flight` }],
};

const constBlogData = {
  upperHeader: "We're Eager To Hear From You",
  title: "Contact Us",
  paragraphs: ["Stay touch with us."],
  upperHeaderTwo: "They Are Here For You",
  titleTwo: "Our Fleet Aircrafts",
};

const swiper = {
  title: "Discover The Skies under a new Perspective",
  upperHeader: `DISCOVERY FLIGHTS`,
  paragraphs: [""],
  items: [
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/old website/download-768x431.jpeg",
        alt: "Download",
      },
    },
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/facebook/aircraft-underview-day-city-canal-angle2.jpg",
        alt: "Aircraft underview with city canal from angle 2",
      },
    },
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/facebook/small-zeppelin-peanuts-farm-field.jpg",
        alt: "Small zeppelin over peanuts farm field",
      },
    },
    {
      title: "",
      description: "",
      image: {
        src: "/src/assets/drive/sky-sunset-plane-wing-2_eagle-air_indiana-USA_valparaiso-IN_Flight-school_pilot-training.jpg",
        alt: "Sky sunset plane wing view 2, Eagle Aircraft Indiana USA Valparaiso IN flight school pilot training",
      },
    },
  ],
};
---

<BaseLayout
  siteTitle={`Discovery Flight in ${LOCATION.city}, ${LOCATION.state} | ${COMPANY_NAME}`}
  siteDescription={`Take the controls on your first flight lesson. Book a discovery flight with ${COMPANY_NAME} in ${LOCATION.city}, ${LOCATION.state}.`}
>
  <Hero75 data={heroData} />
  <DiscoveryFlightOffering />
  <DiscoveryFlightFormSection />
  <DiscoveryFlightPostOffering />
  <div class="py-6"></div>
  <CardSwiper swiperData={swiper} items={swiper.items} />
  <div class="py-12"></div>
  <CTASection />
</BaseLayout>
